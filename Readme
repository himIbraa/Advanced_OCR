# Complete Decree OCR Pipeline

A comprehensive end-to-end solution for extracting, processing, and recognizing text from official journal decree documents using PDF-to-OCR pipeline with Arabic language support.

## ğŸ“‹ Pipeline Overview

```
PDF Files
   â†“
[Step 1: PDF to PNG Converter] â†’ Extract pages as images
   â†“
PNG Images (./media/{pdf_name}/)
   â†“
[Step 2: Decree Image Processor] â†’ Remove headers, crop, split columns
   â†“
Processed Two-Column Images (./media/{pdf_name}_output/)
   â†“
[Step 3: Google Vision OCR] â†’ Extract Arabic text (rightâ†’left)
   â†“
JSON + TXT Output (Structured & Merged Text)
```

---

## ğŸš€ Quick Start

### Prerequisites

```bash
# Install all dependencies
pip install pdf2image opencv-python numpy google-cloud-vision jupyter

# System dependencies
# macOS:
brew install poppler

# Linux:
sudo apt-get install poppler-utils

# Windows:
pip install python-poppler-qt5
```

### Setup Google Cloud Vision

1. **Create Google Cloud Project**
   - Go to [Google Cloud Console](https://console.cloud.google.com/)
   - Create a new project
   - Enable Vision API

2. **Create Service Account**
   - Navigate to Service Accounts
   - Create new service account
   - Create and download JSON key
   - Place as `credentials.json` in project root directory

### Directory Structure

```
project_root/
â”œâ”€â”€ Advanced_OCR.ipynb            # Main notebook (all steps)
â”œâ”€â”€ credentials.json              # Google Cloud credentials
â”œâ”€â”€ PDF/                          # Input PDFs
â””â”€â”€ media/                        # Processing pipeline outputs
    â”œâ”€â”€ {pdf_name}/               # Original PNG extracts
    â””â”€â”€ {pdf_name}_output/        # Processed two-column splits
        â”œâ”€â”€ {pdf_name}.json           # Structured OCR results
        â””â”€â”€ {pdf_name}.txt            # Merged OCR text
```
---

## ğŸ“– Notebook Usage

### Launch Jupyter Notebook

```bash
jupyter notebook Advanced_OCR.ipynb
```

---

## ğŸ”§ Pipeline Steps (Inside Notebook)

### Step 1: PDF to PNG Converter

**What it does:**
- ğŸ“‚ Reads all PDFs from `./PDF/` folder
- ğŸ–¼ï¸ Converts each page to PNG image (200 DPI quality)
- ğŸ“ Saves images in `./media/{pdf_name}/page_X.png`
- ğŸ“ Logs progress, file sizes, and errors

**Key Features:**
- âœ… Batch processing for multiple PDFs
- âœ… Auto-organized output folders
- âœ… Configurable 200 DPI quality (adjustable)
- âœ… Detailed logging with progress tracking
- âœ… Robust error handling

**Output:** Individual page images ready for processing
---

### Step 2: Decree Image Processor

**What it does:**
- ğŸ¯ Automatically removes white borders using contour detection
- ğŸ“‹ Crops official document headers (4.5% by default)
- ğŸ“– Intelligently splits two-column pages into left/right images
- ğŸ’¾ Saves processed images in `./media/{pdf_name}_output/`

**Key Features:**
- âœ… White border removal via binary thresholding
- âœ… Configurable header removal percentage
- âœ… Automatic column detection and splitting
- âœ… Batch processing with logging
- âœ… Preserves page numbering in filenames
